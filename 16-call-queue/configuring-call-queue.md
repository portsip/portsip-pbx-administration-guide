# 配置呼叫队列
## 1 创建一个呼叫队列
在Web Portal上，选择菜单**高级服务 > 呼叫队列**，然后点击**添加**按钮。现在填写必要的字段：   
+ **队列号码** - 在这里指定队列号码。它不应该是一个现有的分机号码
+ **队列名称** - 为队列输入一个友好的名称
+ **外呼主叫ID**- 一旦呼叫队列的呼出来电号码被设置，当没有成员接听电话并将电话转到中继线上的外部号码时，这个呼出来电号码可以替代某些SIP字段。更多细节，请参考第[5.6]节(#呼出参数和呼入参数)
+ **振铃时长** - 以秒为单位的超时，即电话持续响多久才会被认为是该座席未接听的电话。
+ **等待音乐** - 当呼叫者被排队时，将播放的音乐。
+ **振铃方式** - 该选项允许您选择如何将电话分配给座席。
   - **同时振铃**：所有铃声组成员将在同一时间响起。
   - **组次序振铃**：按照配置的顺序给组内每个可用的成员打电话
   - **上次来电后接听次序振铃**：按照成员被添加的顺序响起组内每个可用的成员。之前没有响铃的成员将优先考虑。
   - **最短通话时长次序振铃**：按成员被添加到组内的顺序，给组内每个可用的成员打电话。还没有接听过本组电话的成员将获得优先权
+ **若无在线成员则保持等待**：如果该选项被选中，即使没有坐席在线，队列仍将保持呼叫者在队列中，直到达到最大等待时间。
+ **自动设置队列成员为"准备接听"状态** - 如果该选项被激活，一旦一个队列座席（成员）在PBX上注册，他的状态将被自动设置为 "**Ready**"，队列将把呼叫分配给该座席；当座席响起或完成一个呼叫后，他的状态将被自动设置为 "就绪"。
如果这个选项被禁用，一旦队列中的座席注册到PBX，他的状态会自动设置为 "**Logged Out**"。坐席号码必须先使用REST API或拨打FAC登录到队列中，然后通过REST API或FAC将他的状态改为 "就绪"，队列就可以向他分配呼叫。在座席响铃（不接电话）或完成通话后，他的状态会自动设置为 "**Wrap up**"，PBX将不向该座席分配呼叫。要接收电话，代理必须使用REST API或拨打FAC手动将状态改为 "**Ready**"。
+ **如果无人接听** - 定义最大的队列等待时间，以及如果呼叫一直无应答时要执行的行动。如果没有坐席登录到队列中，并且 "**若无在线成员则保持等待**"被禁用，这个选项会立即被触发。
## 2 队列选项
+ **提示主叫当前等待位置** - 在呼叫中提示呼叫者的位置。
   - **不播放**：不播放位置
   - **定期播放**：每隔一段时间播放位置，以秒为单位
   - **进入队列时播放**。一旦呼叫者连接到队列，将立即宣布位置，然后每隔几秒钟播放一次。
+ **在呼叫坐席之前播放介绍提示音** - 您可以指定一个自定义的介绍提示和一个自定义的保留音乐文件。现在您可以选择是否在系统开始呼叫队列代理之前播放完整的介绍提示。
+ **最大队列等待时间**：一旦呼叫者在呼叫队列中停留的时间超过这个时间，它将被PBX挂断，并被视为 "**Abandone Call**"。
+ **SLA时间**：SLA指的是服务水平协议。呼叫在队列中未被接听的时间超过此字段设置的秒数，在相关报告和统计中被视为违反了SLA的时间限制。一旦设置好，每次当呼叫在队列中停留的时间超过指定的SLA时间，你就会收到通知。
SLA是用来确保你的呼叫者排队时间不超过你指定的时间。例如，如果你声明你的组织内的所有呼叫在3分钟内被接听，你需要将队列中的SLA设置为180秒。一旦达到这个时间，队列管理员就会收到一个警报，通知有一个呼叫违反了服务水平协议。
## 3 配置队列坐席(成员) 
通过点击 "**成员**"标签，你可以选择呼叫队列中的坐席。要改变坐席的顺序，可以拖放它们。  
![](https://4230641821-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MfkamWLaD5pcQwlKWwC%2Fuploads%2FHrMq8A2oZa8TPCRosc5u%2Fqueue_agents.png?alt=media&token=d9e49593-c6eb-4a54-b0cd-5feba63411c3)
## 4 通知
你可以设置一个或多个分机作为队列管理器，在呼叫超过SLA时间或丢失时接收电子邮件通知。  
  
为了向队列管理员发送通知邮件，必须配置SMTP服务器，而且必须启用通知选项。  
  
选择菜单 "**高级 > 通知**"。
![](https://4230641821-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MfkamWLaD5pcQwlKWwC%2Fuploads%2FJjGDFUR68rQtcQw2ltxZ%2Fmail_server.png?alt=media&token=3c6fc8a2-850b-4d30-9cb4-2a5451dad6a7)
![](https://4230641821-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-MfkamWLaD5pcQwlKWwC%2Fuploads%2FZibzgfJ7Z2rGG8H5k8FQ%2Fnotification.png?alt=media&token=2d33fb2f-3b98-4f03-ae1e-b8edcff35b48)
## 5 外呼主叫ID
如果你在 "无应答时的目的地 "中设置了一个外部号码（PSTN），呼叫将被匹配的呼出规则转发到中继，你可以在这里指定这种情况下的呼出号码，呼出号码可以是某些SIP字段的替换。更多细节，请参考[呼出参数和呼入参数](https://support.portsip.com/portsip-pbx-administration-guide/7-trunk-management#7.2-outbound-parameters-and-inbound-parameters)。
